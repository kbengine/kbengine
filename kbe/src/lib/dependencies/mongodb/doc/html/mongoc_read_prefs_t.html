<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<title>mongoc_read_prefs_t</title>
<link rel="stylesheet" type="text/css" href="C.css">
<script type="text/javascript" src="jquery.js"></script><script type="text/javascript" src="jquery.syntax.js"></script><script type="text/javascript" src="yelp.js"></script>
</head>
<body><div class="page" role="main">
<div class="header"><div class="trails" role="navigation"><div class="trail">
<a class="trail" href="index.html" title="MongoDB C Driver">MongoDB C Driver</a> › <a class="trail" href="index.html#api-reference" title="API Reference">API Reference</a> » </div></div></div>
<div class="body">
<div class="hgroup">
<h1 class="title"><span class="title">mongoc_read_prefs_t</span></h1>
<h2 class="subtitle"><span class="subtitle">A read preference abstraction</span></h2>
</div>
<div class="region">
<div class="contents"></div>
<div id="description" class="sect"><div class="inner">
<div class="hgroup"><h2 class="title"><span class="title">Synopsis</span></h2></div>
<div class="region"><div class="contents">
<p class="p"><span class="code"><a href="mongoc_read_prefs_t.html" title="mongoc_read_prefs_t">mongoc_read_prefs_t</a></span> provides an abstraction on top of the MongoDB connection read prefences. It allows for hinting to the driver which nodes in a replica set should be accessed first.</p>
<p class="p">You can specify a read preference mode on connection objects, database objects, collection objects, or per-operation.  Generally, it makes the most sense to stick with the global default, <span class="code">MONGOC_READ_PRIMARY</span>.  All of the other modes come with caveats that won't be covered in great detail here.</p>
</div></div>
</div></div>
<div id="read-modes" class="sect"><div class="inner">
<div class="hgroup"><h2 class="title"><span class="title">Read Modes</span></h2></div>
<div class="region"><div class="contents"><div class="table"><div class="inner"><div class="region"><table class="table">
<tr>
<td><p class="p">MONGOC_READ_PRIMARY</p></td>
<td><p class="p">Default mode. All operations read from the current replica set primary.</p></td>
</tr>
<tr>
<td><p class="p">MONGOC_READ_SECONDARY</p></td>
<td><p class="p">All operations read from among the nearest secondary members of the replica set.</p></td>
</tr>
<tr>
<td><p class="p">MONGOC_READ_PRIMARY_PREFERRED</p></td>
<td><p class="p">In most situations, operations read from the primary but if it is unavailable, operations read from secondary members.</p></td>
</tr>
<tr>
<td><p class="p">MONGOC_READ_SECONDARY_PREFERRED</p></td>
<td><p class="p">In most situations, operations read from among the nearest secondary members, but if no secondaries are available, operations read from the primary.</p></td>
</tr>
<tr>
<td><p class="p">MONGOC_READ_NEAREST</p></td>
<td><p class="p">Operations read from among the nearest members of the replica set, irrespective of the member’s type.</p></td>
</tr>
</table></div></div></div></div></div>
</div></div>
<div id="tag-sets" class="sect"><div class="inner">
<div class="hgroup"><h2 class="title"><span class="title">Tag Sets</span></h2></div>
<div class="region"><div class="contents">
<p class="p">Tag sets allow you to specify custom read preferences and write concerns so that your application can target operations to specific members.</p>
<p class="p">Custom read preferences and write concerns evaluate tags sets in different ways: read preferences consider the value of a tag when selecting a member to read from. while write concerns ignore the value of a tag to when selecting a member except to consider whether or not the value is unique.</p>
<p class="p">You can specify tag sets with the following read preference modes:</p>
<div class="list"><div class="inner"><div class="region"><ul class="list">
<li class="list"><p class="p">primaryPreferred</p></li>
<li class="list"><p class="p">secondary</p></li>
<li class="list"><p class="p">secondaryPreferred</p></li>
<li class="list"><p class="p">nearest</p></li>
</ul></div></div></div>
<p class="p">Tags are not compatible with <span class="code">MONGOC_READ_PRIMARY</span> and, in general, only apply when selecting a secondary member of a set for a read operation. However, the nearest read mode, when combined with a tag set will select the nearest member that matches the specified tag set, which may be a primary or secondary.</p>
<p class="p">All interfaces use the same member selection logic to choose the member to which to direct read operations, basing the choice on read preference mode and tag sets.</p>
</div></div>
</div></div>
<div class="sect sect-links" role="navigation">
<div class="hgroup"></div>
<div class="contents">
<div class="links topiclinks"><div class="inner">
<div class="title title-links"><h2><span class="title">Functions</span></h2></div>
<div class="region">
<div class="links-twocolumn">
<div class="linkdiv "><a class="linkdiv" href="mongoc_read_prefs_add_tag.html" title="mongoc_read_prefs_add_tag()"><span class="title">mongoc_read_prefs_add_tag()</span></a></div>
<div class="linkdiv "><a class="linkdiv" href="mongoc_read_prefs_copy.html" title="mongoc_read_prefs_copy()"><span class="title">mongoc_read_prefs_copy()</span></a></div>
<div class="linkdiv "><a class="linkdiv" href="mongoc_read_prefs_destroy.html" title="mongoc_read_prefs_destroy()"><span class="title">mongoc_read_prefs_destroy()</span></a></div>
<div class="linkdiv "><a class="linkdiv" href="mongoc_read_prefs_get_mode.html" title="mongoc_read_prefs_get_mode()"><span class="title">mongoc_read_prefs_get_mode()</span></a></div>
<div class="linkdiv "><a class="linkdiv" href="mongoc_read_prefs_get_tags.html" title="mongoc_read_prefs_get_tags()"><span class="title">mongoc_read_prefs_get_tags()</span></a></div>
</div>
<div class="links-twocolumn">
<div class="linkdiv "><a class="linkdiv" href="mongoc_read_prefs_is_valid.html" title="mongoc_read_prefs_is_valid()"><span class="title">mongoc_read_prefs_is_valid()</span></a></div>
<div class="linkdiv "><a class="linkdiv" href="mongoc_read_prefs_new.html" title="mongoc_read_prefs_new()"><span class="title">mongoc_read_prefs_new()</span></a></div>
<div class="linkdiv "><a class="linkdiv" href="mongoc_read_prefs_set_mode.html" title="mongoc_read_prefs_set_mode()"><span class="title">mongoc_read_prefs_set_mode()</span></a></div>
<div class="linkdiv "><a class="linkdiv" href="mongoc_read_prefs_set_tags.html" title="mongoc_read_prefs_set_tags()"><span class="title">mongoc_read_prefs_set_tags()</span></a></div>
</div>
</div>
</div></div>
<div class="links guidelinks"><div class="inner">
<div class="title"><h2><span class="title">More Information</span></h2></div>
<div class="region"><ul><li class="links "><a href="index.html#api-reference" title="API Reference">API Reference</a></li></ul></div>
</div></div>
</div>
</div>
</div>
<div class="clear"></div>
</div>
<div class="footer"></div>
</div></body>
</html>
